@model Entities.SinhVien
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/inforGiangVienSinhVien.css" rel="stylesheet" />
<form id="form1">
    <div class="container">
        <div class="row">
            <div class="col-sm-12" data-pattern="priority-columns" style="border-style: groove;padding: 1px 1px 0 1px;">
                <div class="col-sm-12 panel panel-primary" style="background-color: #585858">
                    <div class="panel-heading panel-dark" style="font-size: 30px;color: white;">
                        THÔNG TIN SINH VIÊN
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 p-5">
                        <img id="img" src="https://www.winhelponline.com/blog/wp-content/uploads/2017/12/user.png">
                    </div>
                    <div class="col-md-3 pt-4" id="textbox1">
                        <form>
                            <div class="form-group">
                                <label for="inputMaSinhVien">Mã sinh viên</label>
                                @Html.EditorFor(model => model.idSinhVien, new { htmlAttributes = new { @class = "form-control", id = "inputMaSinhVien", type = "text" } })
                            </div>
                            <div class="form-group">
                                <label for="inputHoTen">Họ tên</label>
                                @Html.EditorFor(model => model.hoTen, new { htmlAttributes = new { @class = "form-control", id = "inputHoTen", type = "text" } })
                            </div>
                            <div class="form-group">
                                <label for="inputNienkhoa">Niên khóa</label>
                                @Html.EditorFor(model => model.nienKhoa, new { htmlAttributes = new { @class = "form-control", id = "inputNienkhoa", type = "text" } })
                            </div>
                        </form>
                    </div>
                    <div class="col-md-3 pt-4" id="textbox2">
                        <form>
                            <div class="form-group">
                                <label for="inputSoDienThoai">Số điện thoại</label>
                                @Html.EditorFor(model => model.soDienThoai, new { htmlAttributes = new { @class = "form-control", id = "inputSoDienThoai", type = "text" } })
                            </div>
                            <div class="form-group">
                                <label for="inputEmail">Email</label>
                                @Html.EditorFor(model => model.email, new { htmlAttributes = new { @class = "form-control", id = "inputEmail", type = "text" } })
                            </div>
                            <div class="form-group">
                                <label for="inputDiaChi">Địa chỉ</label>
                                @Html.EditorFor(model => model.diaChi, new { htmlAttributes = new { @class = "form-control", id = "inputDiaChi", type = "text" } })
                            </div>
                            @Html.EditorFor(model => model.idDoAn, new { htmlAttributes = new { @class = "form-control", id = "inputIdDoAn", type = "text", @style="display: none" } })
                        </form>
                    </div>
                    <div class="col-md-3 p-5">
                        <div class="form-group" id="button">
                            <button type="button" class="btn btn-primary btn-sm" id="btnSua" data-toggle="modal" data-target="#myModal1">
                                Sửa thông tin
                            </button>
                            <!-- Modal -->
                            <div class="modal fade" id="myModal1" role="dialog" aria-labelledby="myModalLabel1">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel">Thông tin sinh viên</h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        </div>
                                        <div class="modal-body">
                                            <form role="form" action='#' method="post">
                                                <div class="form-group">
                                                    <label for="sodienthoai">Số điện thoại:</label>
                                                    <input type="text" class="form-control" id="sodienthoai">
                                                </div>
                                                <div class="form-group">
                                                    <label for="email">Email:</label>
                                                    <input type="text" class="form-control" id="email">
                                                </div>
                                                <div class="form-group">
                                                    <label for="diachi">Địa chỉ:</label>
                                                    <input type="text" class="form-control" id="diachi">
                                                </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-primary btn-block" id="btnLuu" data-dismiss="modal" href="#">Lưu</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn-primary btn-sm" id="btnDoiMatKhau" data-toggle="modal" data-target="#myModal2">
                                Đổi mật khẩu
                            </button>
                            <!-- Modal -->
                            <div class="modal fade" id="myModal2" role="dialog" aria-labelledby="myModalLabel2">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel">Mật khẩu</h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        </div>
                                        <div class="modal-body">
                                            <form role="form" action='#' method="post">
                                                <div class="form-group">
                                                    <label for="matkhaucu">Mật khẩu cũ:</label>
                                                    <input type="password" class="form-control" id="matkhaucu">
                                                </div>
                                                <div class="form-group">
                                                    <label for="matkhaumoi">Mật khẩu mới:</label>
                                                    <input type="password" class="form-control" id="matkhaumoi">
                                                </div>
                                                <div class="form-group">
                                                    <label for="nhapLai">Nhập lại mật khẩu mới:</label>
                                                    <input type="password" class="form-control" id="nhapLai">
                                                </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-primary btn-block" id="btnXacNhan" data-dismiss="modal" href="#">Xác nhận</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary btn-sm" id="btnDangXuat">Đăng xuất</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
    </br>
<div class="container">
    <div class="row">
        <div class="col-sm-12" style="text-align: center; font-size: 30px;">
            DANH SÁCH ĐỒ ÁN
        </div>
    </div>
    </br>
    <form id="form2">
        <div class="row">
            <div class="col-sm-12" style="border-style: groove; padding: 1px 1px 1px 1px; font-size: 15px;">
                <div class="table-responsive-lg" style="text-align: center;">
                    <table class="table table-striped table-bordered table-hover" id="tableDKDoan">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col" style="width:5%;">ID</th>
                                <th scope="col" style="width:45%;">Tên đồ án</th>
                                <th scope="col" style="width:30%;">Tên giảng viên</th>
                                <th scope="col" style="width:20%;">Tình trạng</th>
                            </tr>
                        </thead>
                        <tbody id="listDoAn">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </form>
</div>
<script src="~/Scripts/jquery-3.5.1.js"></script>
<script>
    var idSinhVien = 0;
    $(document).ready(function () {
        var data = []
        var idDoAn = $("#inputIdDoAn").val()
        $.ajax({
            type: "GET",
            dataType: "json",
            url: "https://localhost:44330/api/DoAn/GetAll",
            data: data,
            success: function (data) {
                //console.log($("#inputIdDoAn").val() > 0)
                var s = "";
                for (var i = 0; i < data.length; i++) {
                    s += "<tr>";
                    s += "<th scope=\"row\">" + data[i].idDoAn + "</th>";
                    s += "<td>" + data[i].tenDoAn + "</td>";
                    s += "<td>" + data[i].GiangVien.hoTen + "</td>";
                    s += "<td>";
                    if ((idDoAn != data[i].idDoAn) && (idDoAn > 0)) {
                        console.log("ahihi");
                        s += "<button class=\"btn btn-primary btnClickDetail\" href=\"DetailDoAn?Id=" + data[i].idDoAn +"\" disabled>Chi Tiết</button>"
                    }
                    else {
                        s += "<a class=\"btn btn-primary btnClickDetail\" href=\"DetailDoAn?Id=" + data[i].idDoAn +"\">Chi Tiết</a>"
                    }
                    s += "</td >";
                    s += "</tr >";
                }
                document.getElementById("listDoAn").innerHTML = s;
            },
            error: function (error) {
                jsonValue = jQuery.parseJSON(error.responseText);
                alert("error" + error.responseText);
            }
        });
    });
</script>

